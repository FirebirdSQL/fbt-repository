{
'id': 'functional.basic.db.db_22',
'qmid': 'functional.basic.db.db_22',
'tracker_id': '',
'title': 'Empty DB - RDB$RELATION_CONSTRAINTS',
'description': 'Check for correct content of RDB$RELATION_CONSTRAINTS in empty database.',
'min_versions': None,
'versions': [
{
 'firebird_version': '1.0',
 'platform': 'All',
 'test_type': 'ISQL',
 'test_script': 'select * from RDB$RELATION_CONSTRAINTS;'
},
{
 'firebird_version': '3.0',
 'platform': 'All',
 'test_type': 'ISQL',
 'test_script': 
  """
    set list on;
    set count on;
    select rc.*
    from rdb$relation_constraints rc
    order by lpad( trim(replace(rdb$constraint_name, 'RDB$INDEX_', '')),31,'0');
  """,
 'expected_stdout': 
  """
    RDB$CONSTRAINT_NAME             RDB$INDEX_0
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$RELATIONS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_0

    RDB$CONSTRAINT_NAME             RDB$INDEX_2
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$FIELDS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_2

    RDB$CONSTRAINT_NAME             RDB$INDEX_5
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$INDICES
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_5

    RDB$CONSTRAINT_NAME             RDB$INDEX_7
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$SECURITY_CLASSES
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_7

    RDB$CONSTRAINT_NAME             RDB$INDEX_8
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$TRIGGERS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_8

    RDB$CONSTRAINT_NAME             RDB$INDEX_9
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$FUNCTIONS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_9

    RDB$CONSTRAINT_NAME             RDB$INDEX_11
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$GENERATORS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_11

    RDB$CONSTRAINT_NAME             RDB$INDEX_12
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$RELATION_CONSTRAINTS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_12

    RDB$CONSTRAINT_NAME             RDB$INDEX_13
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$REF_CONSTRAINTS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_13

    RDB$CONSTRAINT_NAME             RDB$INDEX_15
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$RELATION_FIELDS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_15

    RDB$CONSTRAINT_NAME             RDB$INDEX_17
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$FILTERS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_17

    RDB$CONSTRAINT_NAME             RDB$INDEX_18
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$PROCEDURE_PARAMETERS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_18

    RDB$CONSTRAINT_NAME             RDB$INDEX_19
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$CHARACTER_SETS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_19

    RDB$CONSTRAINT_NAME             RDB$INDEX_20
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$COLLATIONS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_20

    RDB$CONSTRAINT_NAME             RDB$INDEX_21
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$PROCEDURES
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_21

    RDB$CONSTRAINT_NAME             RDB$INDEX_22
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$PROCEDURES
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_22

    RDB$CONSTRAINT_NAME             RDB$INDEX_23
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$EXCEPTIONS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_23

    RDB$CONSTRAINT_NAME             RDB$INDEX_24
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$EXCEPTIONS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_24

    RDB$CONSTRAINT_NAME             RDB$INDEX_25
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$CHARACTER_SETS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_25

    RDB$CONSTRAINT_NAME             RDB$INDEX_26
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$COLLATIONS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_26

    RDB$CONSTRAINT_NAME             RDB$INDEX_32
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$TRANSACTIONS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_32

    RDB$CONSTRAINT_NAME             RDB$INDEX_39
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$ROLES
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_39

    RDB$CONSTRAINT_NAME             RDB$INDEX_44
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$BACKUP_HISTORY
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_44

    RDB$CONSTRAINT_NAME             RDB$INDEX_45
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$FILTERS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_45

    RDB$CONSTRAINT_NAME             RDB$INDEX_46
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$GENERATORS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_46

    RDB$CONSTRAINT_NAME             RDB$INDEX_47
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$PACKAGES
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_47

    RDB$CONSTRAINT_NAME             RDB$INDEX_53
    RDB$CONSTRAINT_TYPE             UNIQUE
    RDB$RELATION_NAME               RDB$FUNCTIONS
    RDB$DEFERRABLE                  NO
    RDB$INITIALLY_DEFERRED          NO
    RDB$INDEX_NAME                  RDB$INDEX_53


    Records affected: 27
  """,
  'substitutions': [
      ('RDB\$CONSTRAINT_NAME[\s]+RDB\$INDEX.*','RDB\$CONSTRAINT_NAME RDB\$INDEX')
     ,('RDB\$INDEX_NAME[\s]+RDB\$INDEX.*','RDB\$INDEX_NAME RDB\$INDEX')
  ]
}
]
}
